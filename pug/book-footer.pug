
// footer
footer.mainfooter
  .container
    .grid
      .col-6
        | Copyright 2018 SitePoint



script(src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js")

script(src="scripts/prism.js")

script.
  $(document).ready(function(){
    $('.showmobile').click(function(){
      $(this).toggleClass('open');
      $('.mobilenav').toggleClass('open');
    });
    $('.logged-out').click(function(){
      $('.login-panel').toggleClass('open');
    });
    $('.account-items').click(function(){
      $('.account-items').toggleClass('open');
    });
    $('.logout').click(function(){
      $('.sitepoint-branding').removeClass('member');
    });
  });
    $(window).resize(function(){ /* close the menu on screen resize */
      $('.showmobile').removeClass('open');
      $('.login-panel').removeClass('open');

    });




  function initToolbar(){

    const brand = document.querySelector('.sitepoint-branding');  // select the brand
    const tools = document.querySelector('#toolstrip');  // select the brand
    const toolbaroffset = brand.offsetHeight; // height of the brand

    const nav = document.querySelector('#toolstrip'); // height of the toolstrip
    const navTop = nav.offsetTop ; // distance from top edge
    const navMin = navTop/4; // the delay before the title rolls on to the titlebar
    var lastScrollTop = 0; // set for updating to determine scroll direction

    function stickyNavigation() {
      // console.log('navTop = ' + navTop);
      console.log('scrollY = ' + window.scrollY);
      console.log('toolbaroffset = ' + toolbaroffset);  
      var st = window.pageYOffset || document.documentElement.scrollTop; 
      
      if (window.scrollY >= navTop) { // If scroll pos is greater than 418
        document.body.style.paddingTop = nav.offsetHeight + 'px'; // Add padding-top to BODY to push down from strip
        nav.classList.add('fixed-nav'); // add class that fixes toolstrip in place
      } else {
        document.body.style.paddingTop = 0;
        nav.classList.remove('fixed-nav');
      }
      /* minize brand bar on scroll */
      if (window.scrollY >= navMin) {
        brand.classList.add('min');
      } else {
        brand.classList.remove('min');
      }


      if (st > lastScrollTop){ 
        brand.classList.add('tuckaway');
        tools.classList.add('tuckaway');
      } else {
        brand.classList.remove('tuckaway');
        tools.classList.remove('tuckaway');
      }
      lastScrollTop = st <= 0 ? 0 : st; /* For Mobile or negative scrolling */

    }
    window.addEventListener('scroll', stickyNavigation);
  }
  initToolbar();


