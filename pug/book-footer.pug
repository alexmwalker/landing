
// footer
footer.mainfooter
  .container
    .grid
      .col-6
        | Copyright 2018 SitePoint
      .col-6#log
        | The root of this document is: 



//script(src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js")
script(src="scripts/jquery-3.4.0.min.js")
script(src="scripts/prism.js")

script.
  var currentgrid =       $(":root").css("--basegrid");
  var currentgridtablet = $(":root").css("--basegrid-tablet");
  var currentgridlaptop = $(":root").css("--basegrid-laptop");
  var currentgridwide =   $(":root").css("--basegrid-wide");
  var newcurrentgrid;
  var newcurrentgridtablet;
  var newcurrentgridlaptop;
  var newcurrentgridwide;
  $(document).ready(function(){
    $('.showmobile').click(function(){
      $(this).toggleClass('open');
      $('.mobilenav').toggleClass('open');
    });
    $('.viewchapters').click(function(){
      $('.toc-container').toggleClass('open');
    });
    $('#closetoc').click(function(){
      $('.toc-container').removeClass('open');
    });
    $('#showfontchanger').click(function(){
      $('#font-adjuster-container').toggleClass('open');
    });

    $('.fontsizedown').click(function(){
      newcurrentgrid = parseInt(currentgrid,10) - 4 +'px';   
      $(":root").css("--basegrid", newcurrentgrid);
      console.log("currentgrid: "+currentgrid); 
      console.log("newcurrentgrid: "+newcurrentgrid); 
      currentgrid = newcurrentgrid;

      newcurrentgridtablet = parseInt(currentgridtablet,10) - 4 +'px';  
      $(":root").css("--basegrid-tablet", newcurrentgridtablet);
      console.log("currentgridtablet: "+currentgridtablet); 
      console.log("newcurrentgridtablet: "+newcurrentgridtablet);
      currentgridtablet = newcurrentgridtablet;

      newcurrentgridlaptop = parseInt(currentgridlaptop,10) - 4 +'px';   
      $(":root").css("--basegrid-laptop", newcurrentgridlaptop);
      currentgridlaptop = newcurrentgridlaptop;

      newcurrentgridwide = parseInt(currentgridwide,10) - 4 +'px';   
      $(":root").css("--basegrid-wide", newcurrentgridwide);
      currentgridwide = newcurrentgridwide;
    });    
    $('.fontsizeup').click(function(){
      newcurrentgrid = parseInt(currentgrid,10) + 4 +'px';   
      $(":root").css("--basegrid", newcurrentgrid);
      currentgrid = newcurrentgrid;

      newcurrentgridtablet = parseInt(currentgridtablet,10) + 4 +'px';   
      $(":root").css("--basegrid-tablet", newcurrentgridtablet);
      currentgridtablet = newcurrentgridtablet;

      newcurrentgridlaptop = parseInt(currentgridlaptop,10) + 4 +'px';   
      $(":root").css("--basegrid-laptop", newcurrentgridlaptop);
      currentgridlaptop = newcurrentgridlaptop;

      newcurrentgridwide = parseInt(currentgridwide,10) + 4 +'px';   
      $(":root").css("--basegrid-wide", newcurrentgridwide);
      currentgridwide = newcurrentgridwide;

    });
  });

    $(window).resize(function(){ /* close the menu on screen resize */
      $('.showmobile' ).removeClass('open');
      $('.mobilenav'  ).removeClass('open');
    });

    $(window).scroll(function(){ /* close the menu on scroll */
      $('.showmobile' ).removeClass('open');
      $('.mobilenav'  ).removeClass('open');
    });



  function scrollActions(){

    const brand = document.querySelector('.sitepoint-branding');  // select the brand
    const toolcontainer = document.querySelector('#tool-container'); // height of the toolstrip

    const toolstrip = document.querySelector('#toolstrip'); // height of the toolstrip
    const bookpanel = document.querySelector('.bookpanel'); // height of the bookpanel


    const navTop = toolcontainer.offsetTop ; // distance from top edge
    const navMin = navTop/4; // the delay before the title rolls on to the titlebar
    var lastScrollTop = 0; // set for updating to determine scroll direction

    function stickyNavigation() {
      //console.log('navTop = ' + navTop);
      //console.log('scrollY = ' + window.scrollY);
      //console.log('toolbaroffset = ' + toolbaroffset);  
      var st = window.pageYOffset || document.documentElement.scrollTop; 
      
      if (window.scrollY >= navTop) { // If scroll pos is greater than 418
        //console.log('scrollY = ' + window.scrollY + 'is greater than ' + navTop);
        toolcontainer.classList.add('fixed-nav'); // add class that fixes toolstrip in place
      } else {
        //console.log('scrollY = ' + window.scrollY + ' is less than ' + navTop);
        toolcontainer.classList.remove('fixed-nav');
      }
      /* minize brand bar on scroll */
      if (window.scrollY >= navMin) {
        brand.classList.add('min');
        } else {
        brand.classList.remove('min');
      }


      if (st > lastScrollTop && window.scrollY >= navTop) {  // tuck the brandstrip away when scrolling down - reveal on up scroll
        brand.classList.add('tuckaway');
        toolstrip.classList.add('tuckaway');
      } else {
        brand.classList.remove('tuckaway');
        toolstrip.classList.remove('tuckaway');
      }
      lastScrollTop = st <= 0 ? 0 : st; /* For Mobile or negative scrolling */

    }
    window.addEventListener('scroll', stickyNavigation);
  }
  scrollActions();


